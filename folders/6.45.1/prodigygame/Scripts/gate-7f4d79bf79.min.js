var SW=SW||{};SW.Gate={};const GATE_CONTAINER_ID="#parental-gate-container",GATE_FORM_ID="#form",GATE_RETRY_ID="#retry",GATE_OPTIONS_ID="#options",GATE_QUESTION_ID="#question";SW.Gate.FAIL_TOTAL=2,SW.Gate.QUESTION_STORE=[{question:"What rhymes with cat?",options:["hat","soccer","spaghetti"],answer:"hat"},{question:"What does the K in “$1K” stand for?",options:["potassium","knight","thousand"],answer:"thousand"},{question:"What does a VCR do?",options:["it heats up your food","it plays videos on tapes","it heals rashes on the skin"],answer:"it plays videos on tapes"}],SW.Gate.currentQuestion={},SW.Gate.failedQuestions=[],SW.Gate.resetStateToDefault=()=>{SW.Gate.failedQuestions=[],SW.Gate.currentQuestion={}},SW.Gate.postWindowMessage=e=>{SW.Gate.resetStateToDefault(),window.postMessage(JSON.stringify({type:"parental-gate-closed",success:e}),"*"),SW.Gate.loadView()},SW.Gate.loadView=()=>{SW.Gate.goToHome(),SW.Gate.refreshQuestion(),SW.Gate.resetForm()},SW.Gate.resetForm=()=>{$("#form").trigger("reset")},SW.Gate.goToRetry=()=>{$("#form").hide(),$("#retry").show()},SW.Gate.goToHome=()=>{$("#retry").hide(),$("#form").show()},SW.Gate.onBack=()=>{$("#retry").is(":visible")?SW.Gate.loadView():SW.Gate.postWindowMessage(!1)},SW.Gate.onClose=()=>{SW.Gate.postWindowMessage(!1)},SW.Gate.closeAndFail=()=>{SW.Gate.onClose()},SW.Gate.onSuccess=()=>{SW.Gate.postWindowMessage(!0)},SW.Gate.onFail=()=>{SW.Gate.failedQuestions.push(SW.Gate.currentQuestion.question),SW.Gate.failedQuestions.length>=SW.Gate.FAIL_TOTAL?SW.Gate.closeAndFail():SW.Gate.goToRetry()},SW.Gate.onSubmit=e=>{e.preventDefault();$("input:checked").val()===SW.Gate.currentQuestion.answer?SW.Gate.onSuccess():SW.Gate.onFail()},SW.Gate.shuffleArray=e=>{for(let t=e.length-1;t>0;t--){const o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}},SW.Gate.getRandomQuestion=()=>{const e=SW.Gate.QUESTION_STORE.filter((function(e){return!SW.Gate.failedQuestions.includes(e.question)&&e.question!==SW.Gate.currentQuestion.question}));if(0===e.length)throw new Error("No more questions.");const t=e[Math.floor(Math.random()*e.length)];return SW.Gate.shuffleArray(t.options),t},SW.Gate.refreshQuestion=()=>{$("#options").empty();try{SW.Gate.currentQuestion=SW.Gate.getRandomQuestion()}catch(e){SW.Gate.currentQuestion={question:e,options:[],answer:""}}$("#question").text(SW.Gate.currentQuestion.question),SW.Gate.currentQuestion.options.forEach(((e,t)=>$("#options").append(`\n    <input type="radio" name="options" value="${e}" id="option${t}" autocomplete="off" required>\n    <label class="form-button" for="option${t}">${e}</label>\n  `)))},$(document).ready(SW.Gate.loadView);