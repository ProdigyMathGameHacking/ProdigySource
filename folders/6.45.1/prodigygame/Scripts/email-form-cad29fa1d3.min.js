var SW=SW||{};SW.EmailForm={},SW.EmailForm.ASSIGN_PARENT_MUTATION="mutation AssignParent($email: EmailAddress!, $membershipId: ID!, $name: String!) {\n  assignMembershipToParent(\n    input: {\n      email: $email\n      membershipId: $membershipId\n      name: $name\n    }\n  )\n  {\n      membershipId\n  }\n}";const EMAIL_FORM_NAME_ID="#eml-form-name",EMAIL_FORM_EMAIL_ID="#eml-form-email",EMAIL_FORM_CONFIRM_ID="#eml-form-confirm",EMAIL_FORM_INVALID_CONTAINER_ID="#eml-invalid-container",EMAIL_FORM_CONTAINER_ID="#eml-form",EMAIL_FORM_SUBMITTED_ID="#eml-form-submitted";SW.EmailForm.parentName="",SW.EmailForm.parentEmail="",SW.EmailForm.resetStateToDefault=()=>{SW.EmailForm.parentName="",SW.EmailForm.parentEmail="",$(EMAIL_FORM_NAME_ID).val(""),$(EMAIL_FORM_EMAIL_ID).val(""),$(EMAIL_FORM_CONFIRM_ID).val(""),SW.EmailForm.updateError("")},SW.EmailForm.postWindowMessage=m=>{SW.EmailForm.resetStateToDefault(),window.postMessage(JSON.stringify({type:"membership-iframe-closed",success:m}),"*"),SW.EmailForm.loadView()},SW.EmailForm.loadView=()=>{SW.EmailForm.goToHome()},SW.EmailForm.goToSubmitted=()=>{$("#eml-form").hide(),$("#eml-form-submitted").show()},SW.EmailForm.goToHome=()=>{SW.EmailForm.resetStateToDefault(),$("#eml-form-submitted").hide(),$("#eml-form").show()},SW.EmailForm.onClose=()=>{SW.EmailForm.postWindowMessage(!0)},SW.EmailForm.onSuccess=()=>{SW.EmailForm.postWindowMessage(!0)},SW.EmailForm.onFail=()=>{SW.EmailForm.onClose()},SW.EmailForm.isValidEmail=m=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(m).toLowerCase()),SW.EmailForm.updateError=m=>{$("#eml-invalid-container").text(m),m.length?$("#eml-invalid-container").show():$("#eml-invalid-container").hide()},SW.EmailForm.onSubmit=m=>{m.preventDefault(),SW.EmailForm.parentName=$(EMAIL_FORM_NAME_ID).val().trim(),SW.EmailForm.parentEmail=$(EMAIL_FORM_EMAIL_ID).val().trim();const a=$(EMAIL_FORM_CONFIRM_ID).val().trim();SW.EmailForm.parentName.length?SW.EmailForm.parentEmail.length?SW.EmailForm.isValidEmail(SW.EmailForm.parentEmail)?SW.EmailForm.parentEmail!==a?SW.EmailForm.updateError("Emails do not match."):(SW.EmailForm.updateError(""),SW.EmailForm.sendEmail(),SW.EmailForm.goToSubmitted()):SW.EmailForm.updateError("Please enter a valid email."):SW.EmailForm.updateError("Parent email is required."):SW.EmailForm.updateError("Parent name is required.")},SW.EmailForm.sendEmail=async()=>{try{await SW.IAP.sendGQLRequest(SW.EmailForm.ASSIGN_PARENT_MUTATION,{name:SW.EmailForm.parentName,email:SW.EmailForm.parentEmail,membershipId:SW.IAP.membershipId})}catch(m){alert(JSON.stringify(m))}},SW.EmailForm.viewTerms=()=>{window.postMessage(JSON.stringify({type:"OPEN_URL_IN_BROWSER",payload:"https://www.prodigygame.com/main-en/terms-and-conditions"}),"*")},SW.EmailForm.viewPrivacy=()=>{window.postMessage(JSON.stringify({type:"OPEN_URL_IN_BROWSER",payload:"https://www.prodigygame.com/main-en/privacy-policy"}),"*")},SW.EmailForm.setupListenersToUpdateError=()=>{[EMAIL_FORM_NAME_ID,EMAIL_FORM_EMAIL_ID,EMAIL_FORM_CONFIRM_ID].forEach((m=>{$(m).change((()=>SW.EmailForm.updateError("")))}))},$(document).ready((()=>{SW.EmailForm.setupListenersToUpdateError(),SW.EmailForm.loadView()}));